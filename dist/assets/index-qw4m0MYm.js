import{r as l,a as je,b as ye}from"./vendor-Dr46sEvn.js";import{N as V,O as ie,u as Ne,L as W,a as ve,b as ce,B as we,R as Se,c as E}from"./router-C00IVF6k.js";import{c as Ce}from"./supabase-0QaKZYZw.js";import{B as I,L as _e,F as k,C as de,a as Ee,E as te,b as Pe,c as Me,d as G,e as q,S as Ae,f as Re,g as U,R as Ie,M as re,P as oe,h as xe,i as z,j as H,U as Oe,k as ke,l as De}from"./icons-B_Rs4I9r.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))p(a);new MutationObserver(a=>{for(const x of a)if(x.type==="childList")for(const c of x.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&p(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const x={};return a.integrity&&(x.integrity=a.integrity),a.referrerPolicy&&(x.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?x.credentials="include":a.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function p(a){if(a.ep)return;a.ep=!0;const x=n(a);fetch(a.href,x)}})();var me={exports:{}},$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Le=l,Te=Symbol.for("react.element"),Ue=Symbol.for("react.fragment"),$e=Object.prototype.hasOwnProperty,Fe=Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Be={key:!0,ref:!0,__self:!0,__source:!0};function pe(s,t,n){var p,a={},x=null,c=null;n!==void 0&&(x=""+n),t.key!==void 0&&(x=""+t.key),t.ref!==void 0&&(c=t.ref);for(p in t)$e.call(t,p)&&!Be.hasOwnProperty(p)&&(a[p]=t[p]);if(s&&s.defaultProps)for(p in t=s.defaultProps,t)a[p]===void 0&&(a[p]=t[p]);return{$$typeof:Te,type:s,key:x,ref:c,props:a,_owner:Fe.current}}$.Fragment=Ue;$.jsx=pe;$.jsxs=pe;me.exports=$;var e=me.exports,J={},le=je;J.createRoot=le.createRoot,J.hydrateRoot=le.hydrateRoot;const Qe="https://wchtseihypmyaskijrix.supabase.co",Ve="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndjaHRzZWloeXBteWFza2lqcml4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1NjMzMDMsImV4cCI6MjA3NDEzOTMwM30.UHHfER3uVkQb3vyfgOHAltP1FXeJVnsOkkYzC7wsG3Q",C=Ce(Qe,Ve,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),ue=l.createContext(void 0),A=()=>{const s=l.useContext(ue);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Ge=({children:s})=>{const[t,n]=l.useState(null),[p,a]=l.useState(null),[x,c]=l.useState(null),[j,u]=l.useState(!0);l.useEffect(()=>{C.auth.getSession().then(({data:{session:g}})=>{a(g),n((g==null?void 0:g.user)??null),g!=null&&g.user?h(g.user.id):u(!1)});const{data:{subscription:m}}=C.auth.onAuthStateChange(async(g,d)=>{a(d),n((d==null?void 0:d.user)??null),d!=null&&d.user?await h(d.user.id):(c(null),u(!1))});return()=>m.unsubscribe()},[]);const h=async m=>{try{const{data:g,error:d}=await C.from("stores").select("*").eq("user_id",m).single();if(d){if(d.code==="PGRST116"){console.log("No store found for user:",m),c(null);return}throw d}c(g)}catch(g){console.error("Error fetching store:",g),c(null)}finally{u(!1)}},r={user:t,session:p,store:x,loading:j,signUp:async(m,g,d)=>{u(!0);try{const{data:v,error:_}=await C.auth.signUp({email:m,password:g,options:{emailRedirectTo:`${window.location.origin}/dashboard`}});if(_)throw _;if(v.user){const{data:O,error:P}=await C.from("stores").insert({user_id:v.user.id,name:d.name||"",email:m,phone:d.phone||"",whatsapp_number:d.whatsapp_number||"",subscription_status:"inactive",subscription_expires_at:null}).select().single();if(P)throw P;v.user.email_confirmed_at&&c(O)}}catch(v){throw console.error("SignUp error:",v),v}finally{u(!1)}},signIn:async(m,g)=>{u(!0);try{const{error:d}=await C.auth.signInWithPassword({email:m,password:g});if(d)throw d}catch(d){throw console.error("SignIn error:",d),u(!1),d}},signOut:async()=>{u(!0);const{error:m}=await C.auth.signOut();if(m)throw console.error("SignOut error:",m),m;u(!1)},refreshStore:async()=>{t&&(u(!0),await h(t.id))}};return e.jsx(ue.Provider,{value:r,children:s})},qe=({children:s})=>{const{user:t,loading:n,store:p}=A();return n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verificando autenticação..."})]})}):t?t&&!p&&!n?e.jsx(V,{to:"/register",replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(V,{to:"/login",replace:!0})},ze=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx(ie,{})}),He=()=>{var x;const s=Ne(),{store:t,signOut:n}=A(),p=async()=>{try{await n()}catch(c){console.error("Error signing out:",c)}},a=[{icon:_e,label:"Dashboard",path:"/dashboard"},{icon:k,label:"Orçamentos",path:"/dashboard/quotes"},{icon:de,label:"Assinatura",path:"/dashboard/subscription"}];return e.jsxs("div",{className:"w-64 bg-white shadow-lg h-screen fixed left-0 top-0",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"ScaffoldPro"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sistema de Orçamentos"})]})]})}),e.jsxs("nav",{className:"mt-6",children:[e.jsx("div",{className:"px-4",children:e.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"MENU PRINCIPAL"})}),a.map(c=>{const j=c.icon,u=s.pathname===c.path;return e.jsxs(W,{to:c.path,className:`flex items-center px-6 py-3 text-sm font-medium transition-colors ${u?"bg-purple-50 text-purple-700 border-r-2 border-purple-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(j,{className:"w-5 h-5 mr-3"}),c.label]},c.path)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-purple-600",children:((x=t==null?void 0:t.name)==null?void 0:x.charAt(0).toUpperCase())||"L"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(t==null?void 0:t.name)||"Sua Loja"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:(t==null?void 0:t.subscription_status)==="active"?"Assinatura Ativa":"Assinatura Inativa"})]})]}),e.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",title:"Sair",children:e.jsx(Ee,{className:"w-4 h-4"})})]})})]})},Je=()=>e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(He,{}),e.jsx("div",{className:"flex-1 ml-64 overflow-auto",children:e.jsx(ie,{})})]}),T=({title:s,value:t,icon:n,color:p})=>{const a={blue:"text-blue-600",orange:"text-orange-600",green:"text-green-600",purple:"text-purple-600"};return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t})]}),e.jsx("div",{className:`p-3 rounded-lg bg-gray-50 ${a[p]}`,children:e.jsx(n,{className:"w-6 h-6"})})]})})},We=()=>{const[s,t]=l.useState([]),[n,p]=l.useState(!0),{store:a}=A(),x=a!=null&&a.id?`${window.location.origin}/form/${a.id}`:"";l.useEffect(()=>{a&&c()},[a]);const c=async()=>{if(a!=null&&a.id)try{const{data:r,error:m}=await C.from("quotes").select("*").eq("store_id",a.id).order("created_at",{ascending:!1});if(m)throw m;t(r||[])}catch(r){console.error("Erro ao buscar orçamentos:",r)}finally{p(!1)}},j=()=>{x&&navigator.clipboard.writeText(x)},u=()=>{x&&window.open(x,"_blank")},h=s.length,y=s.filter(r=>r.status==="pending").length,N=s.filter(r=>r.status==="responded").length,o=s.filter(r=>{const m=new Date().toDateString(),g=new Date(r.created_at).toDateString();return m===g}).length,f=s.slice(0,5);return n?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((r,m)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"},m))})]})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Bem-vindo, ",(a==null?void 0:a.name)||"Loja","!"]}),e.jsx("p",{className:"text-gray-600",children:"Sistema de Orçamentos de Andaimes Tubulares"})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 rounded-2xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2 flex items-center",children:[e.jsx(te,{className:"w-5 h-5 mr-2"}),"Link do Formulário para Clientes"]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 mb-4",children:e.jsx("code",{className:"text-sm break-all",children:x})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:j,className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"Copiar"})]}),e.jsxs("button",{onClick:u,className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Testar"})]})]})]}),e.jsxs("div",{className:"ml-6",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${(a==null?void 0:a.subscription_status)==="active"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:(a==null?void 0:a.subscription_status)==="active"?"Ativa":"Inativa"}),e.jsx("p",{className:"text-sm mt-2 opacity-90",children:a!=null&&a.subscription_expires_at?`Válida até: ${new Date(a.subscription_expires_at).toLocaleDateString("pt-BR")}`:"Assinatura não ativa"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(T,{title:"Total de Orçamentos",value:h,icon:k,color:"blue"}),e.jsx(T,{title:"Pendentes",value:y,icon:Me,color:"orange"}),e.jsx(T,{title:"Respondidos",value:N,icon:G,color:"green"}),e.jsx(T,{title:"Hoje",value:o,icon:q,color:"purple"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2 text-purple-600"}),"Orçamentos Recentes"]}),e.jsx("button",{className:"text-purple-600 hover:text-purple-700 font-medium",children:"Ver Todos →"})]})}),e.jsx("div",{className:"p-6",children:f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(k,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum orçamento encontrado"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Compartilhe o link do formulário com seus clientes para começar a receber orçamentos"})]}):e.jsx("div",{className:"space-y-4",children:f.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-purple-600",children:r.client_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.client_name}),e.jsx("p",{className:"text-sm text-gray-500",children:r.client_phone}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Andaime: ",r.scaffold_type," - ",r.scaffold_height]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${r.status==="pending"?"bg-orange-100 text-orange-800":r.status==="responded"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status==="pending"?"Pendente":r.status==="responded"?"Respondido":"Concluído"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(r.created_at).toLocaleDateString("pt-BR")," às"," ",new Date(r.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})]}),e.jsx("button",{className:"text-purple-600 hover:text-purple-700 text-xs font-medium mt-1",children:"Ver Detalhes"})]})]},r.id))})})]})]})},Xe=()=>{const[s,t]=l.useState([]),[n,p]=l.useState(!0),[a,x]=l.useState(""),[c,j]=l.useState("all"),{store:u}=A();l.useEffect(()=>{u&&h()},[u]);const h=async()=>{if(u!=null&&u.id)try{const{data:o,error:f}=await C.from("quotes").select("*").eq("store_id",u.id).order("created_at",{ascending:!1});if(f)throw f;t(o||[])}catch(o){console.error("Erro ao buscar orçamentos:",o)}finally{p(!1)}},y=s.filter(o=>{const f=o.client_name.toLowerCase().includes(a.toLowerCase())||o.client_phone.includes(a)||o.client_email.toLowerCase().includes(a.toLowerCase()),r=c==="all"||o.status===c;return f&&r}),N=o=>{const f={pending:{label:"Pendente",class:"bg-orange-100 text-orange-800"},responded:{label:"Respondido",class:"bg-green-100 text-green-800"},completed:{label:"Concluído",class:"bg-blue-100 text-blue-800"}},r=f[o]||f.pending;return e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${r.class}`,children:r.label})};return n?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((o,f)=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},f))})})]})}):e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Orçamentos"}),e.jsx("p",{className:"text-gray-600",children:"Gerencie todos os orçamentos recebidos"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, telefone ou email...",value:a,onChange:o=>x(o.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent w-80"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Re,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:c,onChange:o=>j(o.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Todos os status"}),e.jsx("option",{value:"pending",children:"Pendentes"}),e.jsx("option",{value:"responded",children:"Respondidos"}),e.jsx("option",{value:"completed",children:"Concluídos"})]})]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[y.length," orçamento",y.length!==1?"s":""," encontrado",y.length!==1?"s":""]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum orçamento encontrado"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:a||c!=="all"?"Tente ajustar os filtros de busca":"Compartilhe o link do formulário com seus clientes para começar a receber orçamentos"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Cliente"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Contato"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Andaime"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Data"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:y.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-sm font-medium text-purple-600",children:o.client_name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:o.client_name}),e.jsx("p",{className:"text-sm text-gray-500",children:o.client_email})]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("p",{className:"text-gray-900",children:o.client_phone})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:o.scaffold_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:[o.scaffold_height," • ",o.tower_quantity," torre",o.tower_quantity!==1?"s":""]})]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:new Date(o.created_at).toLocaleDateString("pt-BR")}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(o.created_at).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})}),e.jsx("td",{className:"py-4 px-6",children:N(o.status)}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("button",{className:"text-purple-600 hover:text-purple-700 font-medium flex items-center space-x-1",children:[e.jsx(U,{className:"w-4 h-4"}),e.jsx("span",{children:"Ver Detalhes"})]})})]},o.id))})]})})})]})},Ye=()=>{const{store:s}=A(),t=[{date:"15/06/2024",description:"Mensalidade - Plano Profissional",amount:"99,90",status:"Pago"},{date:"15/05/2024",description:"Mensalidade - Plano Profissional",amount:"99,90",status:"Pago"},{date:"15/04/2024",description:"Mensalidade - Plano Profissional",amount:"99,90",status:"Pago"},{date:"15/03/2024",description:"Mensalidade - Plano Profissional",amount:"99,90",status:"Pago"}];return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx(de,{className:"w-8 h-8 mr-3 text-purple-600"}),"Sua Assinatura"]}),e.jsx("p",{className:"text-gray-600",children:"Gerencie seu plano e histórico de pagamentos"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Seu Plano Atual"}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Plano Profissional"}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center ${(s==null?void 0:s.subscription_status)==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),(s==null?void 0:s.subscription_status)==="active"?"Ativo":"Inativo"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-200 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-purple-700",children:"$"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Valor Mensal"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:"R$ 99,90"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-200 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-purple-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expira em"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:s!=null&&s.subscription_expires_at?new Date(s.subscription_expires_at).toLocaleDateString("pt-BR",{day:"numeric",month:"long",year:"numeric"}):"Não definido"})]})]})]})]}),e.jsxs("div",{className:"ml-6",children:[e.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium flex items-center space-x-2 transition-colors",children:[e.jsx(Ie,{className:"w-5 h-5"}),e.jsx("span",{children:"Renovar Assinatura"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"Clique para renovar por mais 30 dias."})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx(q,{className:"w-5 h-5 mr-2 text-purple-600"}),"Histórico de Pagamentos"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Data"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Descrição"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Valor (R$)"}),e.jsx("th",{className:"text-left py-4 px-6 font-medium text-gray-900",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((n,p)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-6 text-gray-900",children:n.date}),e.jsx("td",{className:"py-4 px-6 text-gray-900",children:n.description}),e.jsx("td",{className:"py-4 px-6 text-gray-900",children:n.amount}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),n.status]})})]},p))})]})})]})]})},Q={"1x1":{Painéis:[{name:"Painel metálico 1,00x1,00m",id:"painel-1x1"}],Pisos:[{name:"Piso metálico 0,33x1,00m",id:"piso-1x1"}],Diagonais:[{name:"Diagonal metálica 1,41m",id:"diagonal-1x1"}],Rodas:[{name:'Roda metálica c/ rolamento PU 4"x1',id:"roda-1x1"}],"Sapatas ajustáveis":[{name:"Sapata ajustável",id:"sapata-1x1"}],"Guarda-corpo":[{name:"Guarda-corpo c/ porta 1,00m",id:"guarda-corpo-porta-1x1"},{name:"Guarda-corpo s/ porta c/ rodapé 1,00m",id:"guarda-corpo-sem-porta-1x1"}],Escadas:[{name:"Escada metálica 1,00m",id:"escada-1m-1x1"},{name:"Escada metálica 2,00m",id:"escada-2m-1x1"}]},"1x1.50":{Painéis:[{name:"Painel metálico 1,00x1,50m",id:"painel-1x150"}],Pisos:[{name:"Piso metálico 0,37x1,50m",id:"piso-1x150"}],Diagonais:[{name:"Diagonal metálica 2,12m",id:"diagonal-1x150"}],Rodas:[{name:'Roda metálica c/ rolamento PU 4"x1',id:"roda-1x150"}],"Sapatas ajustáveis":[{name:"Sapata ajustável",id:"sapata-1x150"}],"Guarda-corpo":[{name:"Guarda-corpo s/ porta c/ rodapé 1,50m",id:"guarda-corpo-sem-porta-1x150"},{name:"Guarda-corpo c/ porta c/ rodapé 1,50m",id:"guarda-corpo-porta-1x150"}],Escadas:[{name:"Escada metálica 1,00m",id:"escada-1m-1x150"},{name:"Escada metálica 2,00m",id:"escada-2m-1x150"}]},"1x2.00":{Painéis:[{name:"Painel metálico 1,00x2,00m",id:"painel-1x200"}],Pisos:[{name:"Piso metálico 0,37x2,00m",id:"piso-1x200"}],Diagonais:[{name:"Diagonal metálica 2,82m",id:"diagonal-1x200"}],Rodas:[{name:'Roda metálica c/ rolamento PU 4"x1',id:"roda-1x200"}],"Sapatas ajustáveis":[{name:"Sapata ajustável",id:"sapata-1x200"}],"Guarda-corpo":[{name:"Guarda-corpo s/ porta c/ rodapé 2,00m",id:"guarda-corpo-sem-porta-1x200"},{name:"Guarda-corpo c/ porta c/ rodapé 2,00m",id:"guarda-corpo-porta-1x200"}],Escadas:[{name:"Escada metálica 1,00m",id:"escada-1m-1x200"},{name:"Escada metálica 2,00m",id:"escada-2m-1x200"}]}},ne={"1x1":{heights:["2M","3M","4M","5M"],presets:{"2M":{"painel-1x1":4,"piso-1x1":3,"diagonal-1x1":1,"roda-1x1":4,"sapata-1x1":4,"guarda-corpo-porta-1x1":1,"guarda-corpo-sem-porta-1x1":3,"escada-1m-1x1":0,"escada-2m-1x1":1},"3M":{"painel-1x1":6,"piso-1x1":3,"diagonal-1x1":2,"roda-1x1":4,"sapata-1x1":4,"guarda-corpo-porta-1x1":1,"guarda-corpo-sem-porta-1x1":3,"escada-1m-1x1":1,"escada-2m-1x1":1},"4M":{"painel-1x1":8,"piso-1x1":3,"diagonal-1x1":2,"roda-1x1":4,"sapata-1x1":4,"guarda-corpo-porta-1x1":1,"guarda-corpo-sem-porta-1x1":3,"escada-1m-1x1":0,"escada-2m-1x1":2},"5M":{"painel-1x1":10,"piso-1x1":3,"diagonal-1x1":2,"roda-1x1":4,"sapata-1x1":4,"guarda-corpo-porta-1x1":1,"guarda-corpo-sem-porta-1x1":3,"escada-1m-1x1":1,"escada-2m-1x1":2}}},"1x1.50":{heights:["2M","3M","4M","5M","6M","7M","8M","9M","10M"],presets:{"2M":{"painel-1x150":4,"piso-1x150":4,"diagonal-1x150":2,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":0,"escada-2m-1x150":1},"3M":{"painel-1x150":6,"piso-1x150":4,"diagonal-1x150":2,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":1,"escada-2m-1x150":1},"4M":{"painel-1x150":8,"piso-1x150":4,"diagonal-1x150":2,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":0,"escada-2m-1x150":2},"5M":{"painel-1x150":10,"piso-1x150":4,"diagonal-1x150":2,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":1,"escada-2m-1x150":2},"6M":{"painel-1x150":12,"piso-1x150":4,"diagonal-1x150":3,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":0,"escada-2m-1x150":3},"7M":{"painel-1x150":14,"piso-1x150":4,"diagonal-1x150":3,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":1,"escada-2m-1x150":3},"8M":{"painel-1x150":16,"piso-1x150":4,"diagonal-1x150":4,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":0,"escada-2m-1x150":4},"9M":{"painel-1x150":18,"piso-1x150":4,"diagonal-1x150":4,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":1,"escada-2m-1x150":4},"10M":{"painel-1x150":20,"piso-1x150":4,"diagonal-1x150":4,"roda-1x150":4,"sapata-1x150":4,"guarda-corpo-sem-porta-1x150":3,"guarda-corpo-porta-1x150":1,"escada-1m-1x150":0,"escada-2m-1x150":5}}},"1x2.00":{heights:["2M","3M","4M","5M","6M","7M","8M","9M","10M"],presets:{"2M":{"painel-1x200":4,"piso-1x200":5,"diagonal-1x200":2,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":0,"escada-2m-1x200":1},"3M":{"painel-1x200":6,"piso-1x200":5,"diagonal-1x200":2,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":1,"escada-2m-1x200":1},"4M":{"painel-1x200":8,"piso-1x200":5,"diagonal-1x200":2,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":0,"escada-2m-1x200":2},"5M":{"painel-1x200":10,"piso-1x200":5,"diagonal-1x200":2,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":1,"escada-2m-1x200":2},"6M":{"painel-1x200":12,"piso-1x200":5,"diagonal-1x200":3,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":0,"escada-2m-1x200":3},"7M":{"painel-1x200":14,"piso-1x200":5,"diagonal-1x200":3,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":1,"escada-2m-1x200":3},"8M":{"painel-1x200":16,"piso-1x200":5,"diagonal-1x200":4,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":0,"escada-2m-1x200":4},"9M":{"painel-1x200":18,"piso-1x200":5,"diagonal-1x200":4,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":1,"escada-2m-1x200":4},"10M":{"painel-1x200":20,"piso-1x200":5,"diagonal-1x200":4,"roda-1x200":4,"sapata-1x200":4,"guarda-corpo-sem-porta-1x200":3,"guarda-corpo-porta-1x200":1,"escada-1m-1x200":0,"escada-2m-1x200":5}}}},Ze=()=>{var ae;const{storeId:s}=ve(),[t,n]=l.useState(!0),[p,a]=l.useState(!1),[x,c]=l.useState(""),[j,u]=l.useState(""),[h,y]=l.useState(""),[N,o]=l.useState(""),[f,r]=l.useState(""),[m,g]=l.useState("1x1"),[d,v]=l.useState("2M"),[_,O]=l.useState(1),[P,X]=l.useState({}),[Y,Z]=l.useState(!1);l.useEffect(()=>{he()},[s]),l.useEffect(()=>{K()},[m,d,_]);const he=async()=>{if(!s){n(!1);return}try{const{data:i,error:w}=await C.from("stores").select("name, whatsapp_number, subscription_status, subscription_expires_at").eq("id",parseInt(s)).single();if(w)throw w;if(i){const b=i.subscription_status==="active"&&(!i.subscription_expires_at||new Date(i.subscription_expires_at)>new Date);a(b),c(i.name),u(i.whatsapp_number)}}catch(i){console.error("Erro ao verificar status da loja:",i),a(!1)}finally{n(!1)}},K=()=>{var w;const i=(w=ne[m])==null?void 0:w.presets[d];if(i){const b={};Object.entries(i).forEach(([F,D])=>{b[F]=D*_}),X(b)}},ee=(i,w)=>{X(b=>({...b,[i]:Math.max(0,w)}))},ge=async i=>{if(i.preventDefault(),!h||!N||!f){alert("Por favor, preencha todos os dados do cliente.");return}if(!Object.values(P).some(b=>b>0)){alert("Por favor, selecione pelo menos um item.");return}Z(!0);try{const b=[],F=Q[m];Object.entries(F).forEach(([M,B])=>{B.forEach(R=>{const se=P[R.id]||0;se>0&&b.push({id:R.id,name:R.name,quantity:se,category:M})})});const{error:D}=await C.from("quotes").insert({store_id:parseInt(s),client_name:h,client_phone:N,client_email:f,scaffold_type:m,scaffold_height:d,tower_quantity:_,items:b,status:"pending"});if(D)throw D;let S=`*SOLICITAÇÃO DE ORÇAMENTO - ANDAIMES TUBULARES*

`;S+=`*Cliente:* ${h.toUpperCase()}
`,S+=`*Telefone:* ${N}
`,S+=`*Email:* ${f}

`,S+=`*Tipo de Andaime:* Andaime Tubular ${m.replace("x","x")}
`,S+=`*Altura:* ${d}
`,S+=`*Torres:* ${_}

`;const L={};b.forEach(M=>{L[M.category]||(L[M.category]=[]),L[M.category].push(M)}),Object.entries(L).forEach(([M,B])=>{S+=`*${M}*
`,B.forEach(R=>{S+=`• ${R.name} → Quantidade: ${R.quantity}
`}),S+=`
`}),S+="Aguardo retorno com o orçamento. Obrigado!";const fe=encodeURIComponent(S),be=`https://api.whatsapp.com/send/?phone=55${j.replace(/\D/g,"")}&text=${fe}&type=phone_number&app_absent=0`;window.open(be,"_blank"),y(""),o(""),r(""),O(1),K(),alert("Orçamento enviado com sucesso! Você será redirecionado para o WhatsApp.")}catch(b){console.error("Erro ao enviar orçamento:",b),alert("Erro ao enviar orçamento. Tente novamente.")}finally{Z(!1)}};return t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando formulário..."})]})}):p?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 p-8 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Orçamento de Andaime Tubular"}),e.jsx("p",{className:"text-purple-100",children:x})]})]}),e.jsx("p",{className:"text-purple-100",children:"Preencha os dados abaixo para solicitar seu orçamento gratuito"})]}),e.jsxs("form",{onSubmit:ge,className:"p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Dados do Cliente"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),e.jsx("input",{type:"text",value:h,onChange:i=>y(i.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Digite seu nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone *"}),e.jsx("input",{type:"tel",value:N,onChange:i=>o(i.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"(41) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:f,onChange:i=>r(i.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"seu@email.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Tipo de Andaime"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.keys(Q).map(i=>e.jsxs("label",{className:`relative cursor-pointer rounded-xl border-2 p-6 text-center transition-all ${m===i?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"scaffoldType",value:i,checked:m===i,onChange:w=>g(w.target.value),className:"sr-only"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"Andaime Tubular"}),e.jsxs("div",{className:`text-2xl font-bold ${m===i?"text-purple-600":"text-gray-600"}`,children:[i.replace("x","x"),"m"]})]},i))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-semibold text-gray-900 mb-4",children:"Altura do Andaime"}),e.jsx("select",{value:d,onChange:i=>v(i.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg",children:(ae=ne[m])==null?void 0:ae.heights.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xl font-semibold text-gray-900 mb-4",children:"Quantidade de Torres"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>O(Math.max(1,_-1)),className:"w-12 h-12 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 transition-colors",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-3xl font-bold text-gray-900 min-w-[60px] text-center",children:_}),e.jsx("button",{type:"button",onClick:()=>O(_+1),className:"w-12 h-12 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 transition-colors",children:e.jsx(oe,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:["Itens do Andaime Tubular ",m.replace("x","x")]}),e.jsx("div",{className:"space-y-6",children:Object.entries(Q[m]).map(([i,w])=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-600 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-600 rounded-full mr-2"}),i]}),e.jsx("div",{className:"space-y-3",children:w.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:b.name}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>ee(b.id,(P[b.id]||0)-1),className:"w-8 h-8 bg-gray-200 text-gray-600 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx(re,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 min-w-[40px] text-center",children:P[b.id]||0}),e.jsx("button",{type:"button",onClick:()=>ee(b.id,(P[b.id]||0)+1),className:"w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]})]},b.id))})]},i))})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",disabled:Y,className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-purple-700 hover:to-purple-900 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:Y?"Enviando...":"Solicitar Orçamento via WhatsApp"})})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md mx-auto text-center p-8 bg-white rounded-xl shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Formulário Indisponível"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Este formulário não está disponível no momento. A assinatura da loja pode ter expirado ou o link pode estar incorreto."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Entre em contato com a loja para obter um novo link de orçamento."})]})})},Ke=()=>{const[s,t]=l.useState(""),[n,p]=l.useState(""),[a,x]=l.useState(!1),[c,j]=l.useState(!1),[u,h]=l.useState(""),{signIn:y}=A();ce();const N=async o=>{o.preventDefault(),j(!0),h("");try{await y(s,n)}catch(f){console.error("Erro no login:",f);const r=(f==null?void 0:f.message)||"";r.includes("Invalid login credentials")?h("Email ou senha incorretos. Verifique seus dados."):r.includes("Email not confirmed")?h("Email não confirmado. Verifique sua caixa de entrada."):r.includes("Invalid email")?h("Email inválido. Verifique o formato do email."):h(r||"Erro ao fazer login. Tente novamente."),j(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-600 rounded-2xl mb-4",children:e.jsx(I,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ScaffoldPro"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de Orçamentos de Andaimes"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Entrar na sua conta"}),e.jsx("p",{className:"text-gray-600",children:"Acesse o dashboard da sua loja"})]}),u&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600 text-sm",children:u})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"email",value:s,onChange:o=>t(o.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"seu@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:a?"text":"password",value:n,onChange:o=>p(o.target.value),required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Sua senha"}),e.jsx("button",{type:"button",onClick:()=>x(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?e.jsx(H,{className:"w-5 h-5"}):e.jsx(U,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-purple-700 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Entrando...":"Entrar"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Não tem uma conta?"," ",e.jsx(W,{to:"/register",className:"text-purple-600 hover:text-purple-700 font-medium",children:"Cadastre-se aqui"})]})})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-sm text-gray-500",children:"© 2024 ScaffoldPro. Todos os direitos reservados."})})]})})},ea=()=>{const[s,t]=l.useState({name:"",email:"",phone:"",whatsappNumber:"",password:"",confirmPassword:""}),[n,p]=l.useState(!1),[a,x]=l.useState(!1),[c,j]=l.useState(!1),[u,h]=l.useState(""),[y,N]=l.useState(!1),{signUp:o}=A(),f=ce(),r=g=>{t(d=>({...d,[g.target.name]:g.target.value}))},m=async g=>{if(g.preventDefault(),j(!0),h(""),s.password!==s.confirmPassword){h("As senhas não coincidem"),j(!1);return}if(s.password.length<6){h("A senha deve ter pelo menos 6 caracteres"),j(!1);return}if(!s.whatsappNumber){h("WhatsApp é obrigatório"),j(!1);return}try{await o(s.email,s.password,{name:s.name,phone:s.phone,whatsapp_number:s.whatsappNumber}),N(!0)}catch(d){console.error("Erro no cadastro:",d);const v=(d==null?void 0:d.message)||"";v.includes("User already registered")?h("Este email já está cadastrado. Tente fazer login."):v.includes("Invalid email")?h("Email inválido. Verifique o formato do email."):h(v||"Erro ao criar conta. Tente novamente."),j(!1)}};return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full text-center",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Conta criada com sucesso!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Sua conta foi criada! Você já pode fazer login e começar a usar o sistema."}),e.jsx("button",{onClick:()=>f("/login"),className:"bg-purple-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Ir para Login"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-600 rounded-2xl mb-4",children:e.jsx(I,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ScaffoldPro"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de Orçamentos de Andaimes"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Criar sua conta"}),e.jsx("p",{className:"text-gray-600",children:"Cadastre sua loja e comece a receber orçamentos"})]}),u&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600 text-sm",children:u})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Loja *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:r,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Nome da sua loja"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:r,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"seu@email.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:r,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"(41) 99999-9999"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp *"}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"tel",name:"whatsappNumber",value:s.whatsappNumber,onChange:r,required:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"(41) 99999-9999"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:n?"text":"password",name:"password",value:s.password,onChange:r,required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Mínimo 6 caracteres"}),e.jsx("button",{type:"button",onClick:()=>p(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n?e.jsx(H,{className:"w-5 h-5"}):e.jsx(U,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Senha *"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:a?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:r,required:!0,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Confirme sua senha"}),e.jsx("button",{type:"button",onClick:()=>x(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?e.jsx(H,{className:"w-5 h-5"}):e.jsx(U,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-purple-700 focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Criando conta...":"Criar conta"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Já tem uma conta?"," ",e.jsx(W,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-medium",children:"Faça login aqui"})]})})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-sm text-gray-500",children:"© 2024 ScaffoldPro. Todos os direitos reservados."})})]})})},aa=()=>{const{user:s,store:t,loading:n}=A();return l.useEffect(()=>{s&&t&&!n&&window.location.pathname==="/login"&&(window.location.href="/dashboard")},[s,t,n]),n?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):e.jsx(we,{children:e.jsxs(Se,{children:[e.jsx(E,{path:"/login",element:e.jsx(Ke,{})}),e.jsx(E,{path:"/register",element:e.jsx(ea,{})}),e.jsxs(E,{path:"/",element:e.jsx(ze,{}),children:[e.jsx(E,{path:"form/:storeId",element:e.jsx(Ze,{})}),e.jsxs(E,{path:"dashboard",element:e.jsx(qe,{children:e.jsx(Je,{})}),children:[e.jsx(E,{index:!0,element:e.jsx(We,{})}),e.jsx(E,{path:"quotes",element:e.jsx(Xe,{})}),e.jsx(E,{path:"subscription",element:e.jsx(Ye,{})})]}),e.jsx(E,{path:"/",element:e.jsx(V,{to:"/dashboard",replace:!0})})]})]})})};function sa(){return e.jsx(Ge,{children:e.jsx(aa,{})})}J.createRoot(document.getElementById("root")).render(e.jsx(ye.StrictMode,{children:e.jsx(sa,{})}));
